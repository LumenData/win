<script>
	// May need a $(document).ready() wrapper	
	$("#apply_filters").on("click",function(event){
		var filter_form = $(this).closest(".popover_wrapper");
		var column_name = filter_form.data("parent_id");
		var filter_item = $("#report-filters").find("#" + column_name)

		var exact_value = filter_form.find("#filter-exact-value").val();
 		if(filter_item.data("type") == "varchar")
 			exact_value = "'" + exact_value + "'";
 
 		var query_clause = "";

		if(exact_value.length)
			query_clause = column_name + " = " + exact_value;

		// Set a data element on the filter element with a clause to add to the query
 		filter_item.attr("data-filter_clause", query_clause);
		
		filter_item.popover('destroy');
		update_chart();
	});
	
	$("#cancel_filters").on("click",function(event){
		$("#report-filters").find("div").popover('destroy');
	});
	
	var column_name = $(this).closest(".popover_wrapper").data("parent_id");
	var remote_url = '/data/frame/31/forest_firescsv/' + column_name + '/unique_values.json?q=%QUERY';
	console.debug(remote_url);
	
	$(".typeahead").typeahead({
		name: 'column_values_1',
		local: ['timtrueman', 'JakeHarding', 'vskarich'],
		remote: remote_url,
// 		prefetch: {url: 'http://127.0.0.1:8889/data/frame/31/forest_firescsv/month/unique_values.json', ttl: 1},
		limit: 20
	});
	
	// Fix typeahead bootstrap issue
	$('.typeahead.input-sm').siblings('input.tt-hint').addClass('hint-small');
	$('.typeahead.input-lg').siblings('input.tt-hint').addClass('hint-large');
	


	
</script>

Exact Value: 
<!-- <input id="filter-exact-value" type="text" class="form-control input-sm" placeholder="Enter Value"> -->
<!-- <input id="filter-exact-value" type="text" data-provide="typeahead"> -->
<input id="filter-exact-value" type="text" class="typeahead form-control input-sm" autocomplete="off">


<br>

<br>
<button id="apply_filters" class="btn btn-sm btn-primary">Apply</button>
<button id="cancel_filters" class="btn btn-sm btn-default">Close</button>
