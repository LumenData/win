<script>
	var dataframe_row = {{ dataframe_nrow }}
</script>

<script>
	// May need a $(document).ready() wrapper	

	var column_name = $(".popover_wrapper").data("parent_id");
	var remote_url = '/data/frame/' + dataframe_id + '/' + column_name + '/unique_values.json';
	
	$('#training-precent').slider({
		min: 0,
		max: 100,
		step: 1,
		value: 75,
		handle: 'round',
	});

	$('#training-precent').on('slide', function(ev){
		console.debug($(this));
		$("#training-percent").html($(this).val());
		$("#test-percent").html(100 - $(this).val());
		
		var training_rows = Math.floor(dataframe_row * $(this).val() / 100);
		var test_rows = dataframe_row - training_rows;
		$("#training-rows").html(training_rows);
		$("#test-rows").html(test_rows);
	});

	$('#training-precent').trigger('slide');

	// Apply Button
	$("#apply_prediction").on("click",function(event){
		var prediction_form = $(this).closest(".popover_wrapper");
		var column_name = prediction_form.data("parent_id");
		var prediction_item = $("#report-predictions").find("#" + column_name)

		// Close the popup
		prediction_item.popover('destroy');
		
		// Refresh the chart
		update_chart();
	});
	
	// Cancel Button
	$("#cancel_predictions").on("click",function(event){
		$("#report-predictions").find("div").popover('hide');
	});

</script>

<style>
	.slider_info{
		display: inline;
		float: left;
	}
	
	.slider_info.left{
		float: left;
	}
	
	.slider_info.right{
		float: right;
	}
</style>


<b>Data Split</b><br>
<span class="slider_info">
	Test<br>
</span>

<span class="slider_info right">
	Training<br>
</span>
<p>

<input id="training-precent" type="text" class="span2" value=75></input><br>
<span class="slider_info">
	<span id="test-percent">25</span>%<br>
	<span id="test-rows"></span> rows
</span>

<span class="slider_info right">
	<span id="training-percent">75</span>%<br> 
	<span id="training-rows"></span> rows
</span>

<br><br><br><p>

<div style:"display: block; height: 100px">
	<button id="apply_predictions" class="btn btn-sm btn-primary">Predict</button>
	<button id="cancel_predictions" class="btn btn-sm btn-default">Cancel</button>
</div>